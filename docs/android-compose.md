# Android Compose Tokens

This project generates Kotlin files grouped by JSON path segments for Jetpack Compose.
Each unique token group path (all segments except the leaf token name) becomes a
folder containing a `Tokens.kt` file. No nested Kotlin objects are created.

## Build

```bash
npm install
npm run build:tokens
```

The Compose output is written to `build/android-compose/<path>/Tokens.kt`, where `<path>`
matches the JSON path segments (normalized to `lower_snake`).

## Inputs

Place the Figma export in `tokens/design-tokens.tokens-2.json` and run the build.

Optional environment variables:

- `TOKEN_V2_PATH` - Override the path to the tokens file.

## Output Structure

Example mappings:

```kotlin
// JSON path: color/brand/primary/p-40
// File: build/android-compose/color/brand/primary/Tokens.kt
package com.allegion.designtokens.color.brand.primary

object Tokens {
  val p40 = Color(0xFFA43F04)
}
```

Paths and package names mirror the token key hierarchy. Brand names are not generated by code; they only
appear if present in the input token keys.

### Color mapping

Tokens of type `color` are emitted as `Color(0xAARRGGBB)`.

### Dimension mapping

Tokens of type `dimension` are emitted as `<value>.dp`.

### Typography mapping

Tokens of type `typography` are mapped to `TypographyToken` values:

- `fontFamily` -> String
- `fontWeight` -> `FontWeight(<number>)`
- `fontSize` -> `<value>.sp`
- `lineHeight` -> `<value>.sp`
- `letterSpacing` -> `<value>.em` when abs(value) < 1, otherwise `<value>.sp`

### Elevation mapping

Tokens of type `boxShadow` are mapped to `ElevationToken` values with one or more `ShadowLayer`
entries. Each layer includes `color`, `x`, `y`, `blur`, and `spread` values.

## Consumption Example

```kotlin
import com.allegion.designtokens.color.brand.primary.Tokens as BrandPrimary
import com.allegion.designtokens.font.m3.body.Tokens as BodyType
import com.allegion.designtokens.effect.elevations.Tokens as Elevations

Text(
  text = "Hello",
  color = BrandPrimary.p40,
  fontFamily = FontFamily(Font(BodyType.medium.fontFamily)),
  fontSize = BodyType.medium.fontSize,
  lineHeight = BodyType.medium.lineHeight,
  letterSpacing = BodyType.medium.letterSpacing,
  fontWeight = BodyType.medium.fontWeight
)

val elevation1 = Elevations.token1
```

## Configuration

The Compose output is configured in `config.js` under `platforms.androidCompose`.

Key options:

- `TOKEN_GROUP_DEPTH` limits folder depth (number of path segments before the leaf token name).
- `TOKEN_V2_PATH` picks a custom tokens JSON file.

Each generated file includes an auto-generated header comment with the JSON path.
Token names are derived from the leaf token name (lowerCamelCase values).
If leaf names collide within a file, a short hash suffix is appended.
